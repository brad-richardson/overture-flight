const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/three.tsl-DL3sIgKk.js","assets/three.webgpu-D1ZJzK6V.js","assets/index-D_HU2qva.js"])))=>i.map(i=>d[i]);
import{V as w,D as N,bQ as P,bd as g,H as y,L as T,al as D,fY as U}from"./index-D_HU2qva.js";let p=null,f=null;async function S(){return p||(p=await U(()=>import("./three.tsl-DL3sIgKk.js"),__vite__mapDeps([0,1,2]))),p}async function V(){return f||(f=await U(()=>import("./three.webgpu-D1ZJzK6V.js"),__vite__mapDeps([1,2]))),f}async function W(t){const e=await S(),{MeshStandardNodeMaterial:c}=await V(),n=e.texture(t.elevationTexture),r=e.uniform(t.verticalExaggeration),i=e.uniform(new w(t.tileCenter.x,t.tileCenter.z)),u=e.uniform(new w(t.tileDimensions.width,t.tileDimensions.height)),d=e.uniform(Math.max(t.tileDimensions.width,t.tileDimensions.height)/256),_=e.Fn(([o])=>{const s=o.sub(i).div(u).add(.5);return e.clamp(s,0,1)}),m=e.Fn(([o])=>{const a=_(o);return n.uv(a).r.mul(r)}),h=e.Fn(([o])=>{const a=m(o.add(e.vec2(d.negate(),0))),s=m(o.add(e.vec2(d,0))),x=m(o.add(e.vec2(0,d.negate()))),L=m(o.add(e.vec2(0,d))),E=s.sub(a).div(d.mul(2)),M=L.sub(x).div(d.mul(2));return e.normalize(e.vec3(E.negate(),1,M.negate()))}),F=e.Fn(()=>{const o=e.positionLocal,a=e.modelWorldMatrix.mul(e.vec4(o,1)),s=e.vec2(a.x,a.z),x=m(s);return e.vec3(o.x,x,o.z)})(),b=e.Fn(()=>{const o=e.positionLocal,a=e.modelWorldMatrix.mul(e.vec4(o,1)),s=e.vec2(a.x,a.z);return h(s)})(),l=new c;l.positionNode=F,l.normalNode=b,l.roughness=.9,l.metalness=0,l.side=N;let v=null;return t.colorTexture&&(v=e.texture(t.colorTexture),l.colorNode=v),{material:l,setColorTexture:o=>{v=e.texture(o),l.colorNode=v,l.needsUpdate=!0}}}function R(t,e){const c=new Uint16Array(t.length);for(let r=0;r<t.length;r++)c[r]=z(t[r]);const n=new P(c,e,e,g,y);return n.minFilter=T,n.magFilter=T,n.wrapS=D,n.wrapT=D,n.needsUpdate=!0,n}function z(t){const e=new Float32Array(1),c=new Int32Array(e.buffer);e[0]=t;const n=c[0],r=n>>31&1;let i=n>>23&255,u=n&8388607;return i===255?r<<15|31744|(u?512:0):i===0?r<<15:(i=i-127+15,i>=31?r<<15|31744:i<=0?r<<15:(u=u>>13,r<<15|i<<10|u))}export{R as createElevationDataTextureWebGPU,W as createTSLTerrainMaterial};
//# sourceMappingURL=terrain-shader-tsl-5RTQ_Klq.js.map
